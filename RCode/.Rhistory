Dax$Date <- rownames(Dax)
tail(Dax)
Dax <- Dax[,c(6,1,2,3,4)]
atr <- ATR(Dax[,c(2,3,4)], n=14)
Dax <- as.data.frame(getYahooData("^GDAXI", format(Sys.Date()-50, format="%Y%m%d"), format(Sys.Date(), format="%Y%m%d")),stringsAsFactors = FALSE)
class(Dax)
Dax2 <- getYahooData("^GDAXI", format(Sys.Date()-50, format="%Y%m%d"), format(Sys.Date(), format="%Y%m%d"))
class(Dax2)
tail(Dax)
Dax$Date <- rownames(Dax)
tail(Dax)
str(Dax)
Dax$Date <- as.POSIXct(Dax$Date,format='%d/%m/%Y')
tail(Dax)
Dax$Date <- as.POSIXct(Dax$Date,format='%Y/%m/%d')
tail(Dax)
Dax <- as.data.frame(getYahooData("^GDAXI", format(Sys.Date()-50, format="%Y%m%d"), format(Sys.Date(), format="%Y%m%d")),stringsAsFactors = FALSE)
class(Dax)
Dax$Date <- rownames(Dax)
tail(Dax)
Dax$Date <- as.POSIXct(Dax$Date,format='%Y/%m/%d')
tail(Dax)
Dax <- as.data.frame(getYahooData("^GDAXI", format(Sys.Date()-50, format="%Y%m%d"), format(Sys.Date(), format="%Y%m%d")),stringsAsFactors = FALSE)
class(Dax)
Dax$Date <- rownames(Dax)
tail(Dax)
str(Dax)
Dax$Date <- as.POSIXct(Dax$Date,format='%Y-%m-%d')
tail(Dax)
Dax <- Dax[,c(6,1,2,3,4)]
atr <- ATR(Dax[,c(2,3,4)], n=12)
str(Dax)
Dax <- as.data.frame(getYahooData("^GDAXI", format(Sys.Date()-50, format="%Y%m%d"), format(Sys.Date(), format="%Y%m%d")),stringsAsFactors = FALSE)
tail(Dax)
atr <- ATR(Dax[,c(2,3,4)], n=12)
str(Dax)
atr <- ATR(Mkt[,c("High","Low","Close")], n=14)
Dax <- Dax[,c(6,1,2,3,4)]
atr <- ATR(Dax[,c("High","Low","Close")], n=14)
atr <- ATR(Dax[,c(2,3,4)], n=12)
library(forecast)
library(xtable)
library(forecast)
library(forecast)
mean_model <- meanf(Mkt_train, h=5)
library(forecast)
install.packages("forecast")
library(forecast)
r_p_ind <- function(Mkt, nr){
#browser()
Mkt <- AddPrev(Mkt)
au <- Mkt$aroonUp[nr]
ad <- Mkt$aroonDn[nr]
os <- Mkt$oscillator[nr]
df <- Mkt$Diff[nr]
c <- au_df(Mkt,au,df)
d <- ad_df(Mkt,ad,df)
e <- os_df(Mkt,os,df)
e2 <- c+d+e
return(c(c,d,e,e2))
}
Mkt_ta <- read.csv("D:/Allan/DropBox/RWorkingDir/Trading/Data/Oz_ta.csv")
Mkt_ta$Date[nrow(Mkt_ta)]
ln <- nrow(Mkt_ta) ;ln
lw <- ln - 300 ;lw
Mkt_ta <- Mkt_ta[lw:ln,]
ln <- nrow(Mkt_ta) ;ln
r_p_ind(Mkt_ta, ln)
source("D:/Allan/DropBox/RWorkingDir/Trading/Dax/addTA_fnc.R")
r_p_ind2(Mkt_ta, ln)
r_p_ind2 <- function(Mkt, nr){
#browser()
Mkt <- AddPrev(Mkt)
au <- Mkt$aroonUp[nr]
ad <- Mkt$aroonDn[nr]
os <- Mkt$oscillator[nr]
df <- Mkt$Diff[nr]
c <- au_df(Mkt,au,df)
d <- ad_df(Mkt,ad,df)
e <- os_df(Mkt,os,df)
e2 <- c+d+e
return(c(c,d,e,e2))
}
r_p_ind2(Mkt_ta, ln)
ln <- nrow(Mkt)
r_p_ind2 <- function(Mkt, nr){
#browser()
Mkt <- AddPrev(Mkt)
au <- Mkt$aroonUp[nr]
ad <- Mkt$aroonDn[nr]
os <- Mkt$oscillator[nr]
df <- Mkt$Diff[nr]
ln <- nrow(Mkt)
Mkt <- Mkt[-ln,]
c <- au_df(Mkt,au,df)
d <- ad_df(Mkt,ad,df)
e <- os_df(Mkt,os,df)
e2 <- c+d+e
return(c(c,d,e,e2))
}
r_p_ind2(Mkt_ta, ln)
setwd("D:/Allan/DropBox/MSc/Dissertation/Thesis/RCode")
library(xtable)
library(TTR)
library(candlesticks)
source("../RCode//Utils.R")
source("../RCode//NaiveLongSystem.R")
source("../RCode//NaiveLongSystem2.R")
source("../RCode//NaiveReversePrev.R")
source("../RCode//SMA_sys.R")
source("../RCode//MACD_XO.R")
source("../RCode//Aroon.R")
source("../RCode//SAR.R")
source("../RCode//Stoch.R")
source("../RCode//ROC.R")
source("../RCode//ROC2.R")
source("../RCode//MACD_OB.R")
source("../RCode//Bout_sys.R")
source("../RCode//Bout_sys_2.R")
source("../RCode//Quant90_sys.R")
source("../RCode//Candle_Hammer.R")
source("../RCode//Candle_Hammer_aroon.R")
source("../RCode//Candle_Engulf.R")
source("../RCode//Candle_Engulf_aroon.R")
source("../RCode//Candle_Doji_aroon.R")
fil <- c("../Data/Dax_2000_d.csv",
"../Data/CAC_2000_d.csv",
"../Data/F100_2000_d.csv",
"../Data/Dow_2000_d.csv",
"../Data/N225_2000_d.csv",
"../Data/Oz_2000.csv")
#nm <- c("Dax", "CAC", "FTSE", "Dow", "Nikkei", "AORD")
df10 <- as.data.frame(matrix(seq(11),nrow=1,ncol=11)) # to hold results
std6 <- c(1,3,4,5,7,8,10)
run_BaseSystem2Bout <- function(fil,SLoss,nm){
df10 <- as.data.frame(matrix(seq(11),nrow=1,ncol=11))
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
a <- BaseSystem2Bout2(Mkt, SLoss, nm[i])
df10 <- rbind(df10,a)
}
df.name <- names(a)
names(df10) <- df.name
df10 <- df10[-1,]
return(df10)
}
res12 <- run_BaseSystem2Bout(fil,0,nm)
dat <- res12[,std6]
dig <- 2
cap =  c('Results from the Daily High / Low Breakout System.',
'Results from the Daily High / Low Breakout System')
lab = 'tab:hl_bout_sys'
filname ='../Tables/chp_ta_b_out.tex'
inclrnam=FALSE
print_xt(dat,dig,cap,lab,al,filname,inclrnam)
source('D:/Allan/DropBox/MSc/Dissertation/Thesis/RCode/Chapter5.R', echo=TRUE)
exp_mean <- function(Mkt_ts, Mkt, strt){
#browser()
Mkta <- Mkt
cc <- Mkta[1,]
cc$a <- 0
ln <- nrow(Mkt)
for(i in strt:ln){
st <- i-30
Mkt_slice <- window(Mkt_ts,start=st,end=i)
modf <- meanf(Mkt_slice,h=1)
a <- as.numeric(modf$mean)
c1 <- Mkta[i,]
ab <- cbind(c1,a)
cc <- rbind(cc,ab)
}
cc <- cc[-1,]
return(cc)
}
run_exp_mean <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_mean(Mkt_ts,Mkt,400)
write.csv(res,paste('../Data/ES/',nm[i],'_mean.csv'),row.names=FALSE)
}
}
run_exp_mean <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_mean(Mkt_ts,Mkt,400)
browser()
write.csv(res,paste('../Data/ES/',nm[i],'_mean.csv'),row.names=FALSE)
}
}
run_exp_mean <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_mean(Mkt_ts,Mkt,400)
browser()
write.csv(res,paste('../Data/ES/',nm[i],'_es_mean.csv'),row.names=FALSE)
}
}
run_exp_mean(fil,nm)
res
tail(res)
fil <- c("../Data/Dax_2000_d.csv",
"../Data/CAC_2000_d.csv",
"../Data/F100_2000_d.csv",
"../Data/Dow_2000_d.csv",
"../Data/N225_2000_d.csv",
"../Data/Oz_2000.csv")
nm <- c("Dax", "CAC", "FTSE", "Dow", "Nikkei", "AORD")
run_exp_mean <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
browser()
res <- exp_mean(Mkt_ts,Mkt,400)
browser()
write.csv(res,paste('../Data/ES/',nm[i],'_es_mean.csv'),row.names=FALSE)
}
}
run_exp_mean(fil,nm)
tail(Mkt)
run_exp_mean <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_mean(Mkt_ts,Mkt,400)
browser()
write.csv(res,paste('../Data/ES/',nm[i],'_es_mean.csv'),row.names=FALSE)
}
}
run_exp_mean(fil,nm)
tail(res)
#generates data sets with predictions
run_exp_mean <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_mean(Mkt_ts,Mkt,400)
browser()
write.csv(res,paste('../Data/ES/',nm[i],'_es_mean.csv',sep=""),row.names=FALSE)
}
}
run_exp_mean(fil,nm)
run_es_1 <- function(fil,SLoss,nm){
df10 <- as.data.frame(matrix(seq(11),nrow=1,ncol=11))
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
a <- es_1(Mkt, SLoss, nm[i])
df10 <- rbind(df10,a)
}
df.name <- names(a)
names(df10) <- df.name
df10 <- df10[-1,]
return(df10)
}
res_mean <- run_es_1(fil_mean,0,nm)
fil_mean <- c("../Data/ES/Dax_es_mean.csv",
"../Data/ES/CAC_es_mean.csv",
"../Data/ES/F100_es_mean.csv",
"../Data/ES/Dow_es_mean.csv",
"../Data/N225_es_mean.csv",
"../Data/Oz_es_mean.csv")
res_mean <- run_es_1(fil_mean,0,nm)
source("../RCode/es_1.R")
res_mean <- run_es_1(fil_mean,0,nm)
run_es_1 <- function(fil,SLoss,nm){
browser()
df10 <- as.data.frame(matrix(seq(11),nrow=1,ncol=11))
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
a <- es_1(Mkt, SLoss, nm[i])
df10 <- rbind(df10,a)
}
df.name <- names(a)
names(df10) <- df.name
df10 <- df10[-1,]
return(df10)
}
res_mean <- run_es_1(fil_mean,0,nm)
tail(Mkt)
source("../RCode/es_1.R")
res_mean <- run_es_1(fil_mean,0,nm)
a
run_es_1 <- function(fil,SLoss,nm){
df10 <- as.data.frame(matrix(seq(11),nrow=1,ncol=11))
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
a <- es_1(Mkt, SLoss, nm[i])
df10 <- rbind(df10,a)
}
df.name <- names(a)
names(df10) <- df.name
df10 <- df10[-1,]
return(df10)
}
res_mean <- run_es_1(fil_mean,0,nm)
fil_mean <- c("../Data/ES/Dax_es_mean.csv",
"../Data/ES/CAC_es_mean.csv",
"../Data/ES/FTSE_es_mean.csv",
"../Data/ES/Dow_es_mean.csv",
"../Data/Nikkei_es_mean.csv",
"../Data/Oz_es_mean.csv")
res_mean <- run_es_1(fil_mean,0,nm)
fil_mean <- c("../Data/ES/Dax_es_mean.csv",
"../Data/ES/CAC_es_mean.csv",
"../Data/ES/FTSE_es_mean.csv",
"../Data/ES/Dow_es_mean.csv",
"../Data/ES/Nikkei_es_mean.csv",
"../Data/ES/Oz_es_mean.csv")
res_mean <- run_es_1(fil_mean,0,nm)
fil_mean <- c("../Data/ES/Dax_es_mean.csv",
"../Data/ES/CAC_es_mean.csv",
"../Data/ES/FTSE_es_mean.csv",
"../Data/ES/Dow_es_mean.csv",
"../Data/ES/Nikkei_es_mean.csv",
"../Data/ES/AORD_es_mean.csv")
res_mean <- run_es_1(fil_mean,0,nm)
res_mean
dat <- res_mean[,std6]
dig <- 2
cap =  c('Results from the mean base ES System.',
'Results from the mean base ES System')
lab = 'tab:es_mean_sys'
filname ='../Tables/chp_ts_es_mean.tex'
inclrnam=FALSE
print_xt(dat,dig,cap,lab,al,filname,inclrnam)
run_exp_drift <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_mean(Mkt_ts,Mkt,400,FALSE)
write.csv(res,paste('../Data/ES/',nm[i],'_es_drift.csv',sep=""),row.names=FALSE)
}
}
run_exp_drift(fil,nm)
exp_mean <- function(Mkt_ts, Mkt, strt, mean_flag){
#browser()
Mkta <- Mkt
cc <- Mkta[1,]
cc$a <- 0
ln <- nrow(Mkt)
for(i in strt:ln){
st <- i-30
Mkt_slice <- window(Mkt_ts,start=st,end=i)
if (mean_flag == TRUE) {
modf <- meanf(Mkt_slice,h=1)
} else {
modf <- rwf(Mkt_slice,drift=TRUE,h=1)
}
a <- as.numeric(modf$mean)
c1 <- Mkta[i,]
ab <- cbind(c1,a)
cc <- rbind(cc,ab)
}
cc <- cc[-1,]
return(cc)
}
run_exp_drift(fil,nm)
fil_drift <- c("../Data/ES/Dax_es_drift.csv",
"../Data/ES/CAC_es_drift.csv",
"../Data/ES/FTSE_es_drift.csv",
"../Data/ES/Dow_es_drift.csv",
"../Data/ES/Nikkei_es_drift.csv",
"../Data/ES/AORD_es_drift.csv")
res_drift <- run_es_1(fil_drift,0,nm)
res_drift
dat <- res_drift[,std6]
dig <- 2
cap =  c('Results from the drift base ES System.',
'Results from the drift base ES System')
lab = 'tab:es_drift_sys'
filname ='../Tables/chp_ts_es_drift.tex'
inclrnam=FALSE
print_xt(dat,dig,cap,lab,al,filname,inclrnam)
exp_sm <- function(Mkt_ts, Mkt, strt){
Mkta <- Mkt
cc <- Mkta[1,]
cc$a <- 0
cc$b <- 0
ln <- nrow(Mkt)
for(i in strt:ln){
st <- i-30
Mkt_slice <- window(Mkt_ts,start=st,end=i)
modf <- ets(Mkt_slice)
fcastf <- forecast.ets(modf,h=1)
a <- as.numeric(fcastf$mean)
b <- modf$method
c1 <- Mkta[i,]
ab <- cbind(c1,b,a)
cc <- rbind(cc,ab)
}
cc <- cc[-1,]
return(cc)
}
run_exp_sm <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_sm(Mkt_ts,Mkt,400)
browser()
write.csv(res,paste('../Data/ES/',nm[i],'_es.csv',sep=""),row.names=FALSE)
}
}
run_exp_sm <- function(fil,nm){
for(i in 1:length(fil)){
Mkt <- read.csv(fil[i])
Mkt_ts <- ts(Mkt$Close)
res <- exp_sm(Mkt_ts,Mkt,400)
browser()
write.csv(res,paste('../Data/ES/',nm[i],'_es.csv',sep=""),row.names=FALSE)
}
}
run_exp_sm(fil,nm)
setwd("D:/Allan/DropBox/Dmin")
indata <- read.table("clipboard")
colnames(indata) <- c('Mkt','Date','Open','High','Low','Close')
tail(indata,n=7)
library(TTR)
Dax <- read.csv("Dax_2000.csv")
tail(Dax)
ln <- nrow(Dax)
Dax <- Dax[-ln,]
Dax_2 <- add_line(indata,1,Dax)
source("DMin_fnc.R")
write.csv(Dax_2,"Dax_2000.csv",row.names=FALSE)
Dax_2 <- add_line(indata,1,Dax)
tail(Dax_2)
write.csv(Dax_2,"Dax_2000.csv",row.names=FALSE)
Dax_2 <- add_line(indata,7,Dax_2)
tail(Dax_2)
write.csv(Dax_2,"Dax_2000.csv",row.names=FALSE)
CAC <- read.csv("CAC_2000.csv")
tail(CAC)
ln <- nrow(CAC)
CAC <- CAC[-ln,]
CAC_2 <- add_line(indata,2,CAC)
tail(CAC_2)
write.csv(CAC_2,"CAC_2000.csv",row.names=FALSE)
CAC_2 <- add_line(indata,7,CAC_2)
tail(CAC_2)
write.csv(CAC_2,"CAC_2000.csv",row.names=FALSE)
F100 <- read.csv("F100_2000.csv")
tail(F100)
ln <- nrow(F100)
F100 <- F100[-ln,]
F100_2 <- add_line(indata,3,F100)
tail(F100_2)
write.csv(F100_2,"F100_2000.csv",row.names=FALSE)
#add dummy entry, tomoorw
F100_2 <- add_line(indata,7,F100_2)
tail(F100_2)
write.csv(F100_2,"F100_2000.csv",row.names=FALSE)
Nik <- read.csv("N225_2000.csv")
tail(Nik)
ln <- nrow(Nik)
Nik <- Nik[-ln,]
Nik_2 <- add_line(indata,4,Nik) #4th line fr Nikkei
tail(Nik_2)
write.csv(Nik_2,"N225_2000.csv",row.names=FALSE)
#add dummy entry, tomoorw
Nik_2 <- add_line(indata,7,Nik_2)
tail(Nik_2)
write.csv(Nik_2,"N225_2000.csv",row.names=FALSE)
#Oz
Oz <- read.csv("Oz_2000.csv")
tail(Oz)
ln <- nrow(Oz)
Oz <- Oz[-ln,]
Oz_2 <- add_line(indata,5,Oz) #4th line fr Nikkei
tail(Oz_2)
write.csv(Oz_2,"Oz_2000.csv",row.names=FALSE)
#add dummy entry, tomoorw
Oz_2 <- add_line(indata,7,Oz_2)
tail(Oz_2)
write.csv(Oz_2,"Oz_2000.csv",row.names=FALSE)
#Dow
Dow <- read.csv("Dow_2000.csv")
tail(Dow)
ln <- nrow(Dow)
Dow <- Dow[-ln,]
Dow_2 <- add_line(indata,6,Dow) #4th line fr Nikkei
tail(Dow_2)
write.csv(Dow_2,"Dow_2000.csv",row.names=FALSE)
#add dummy entry, tomoorw
Dow_2 <- add_line(indata,7,Dow_2)
tail(Dow_2)
write.csv(Dow_2,"Dow_2000.csv",row.names=FALSE)
fil2 <- c("../Data/N225_2000_d.csv",
"../Data/Oz_2000.csv")
run_exp_sm(fil2,nm)
setwd("D:/Allan/DropBox/MSc/Dissertation/Thesis/RCode")
run_exp_sm(fil2,nm)
fil2 <- c("../Data/Dax_2000_d.csv")
nm <- c("Dax")
run_exp_sm(fil2,nm)
fil_es <- c("../Data/ES/Dax_es.csv",
"../Data/ES/CAC_es.csv",
"../Data/ES/FTSE_es.csv",
"../Data/ES/Dow_es.csv",
"../Data/ES/Nikkei_es.csv",
"../Data/ES/AORD_es.csv")
res_es <- run_es_1(fil_es,0,nm)
res_es
dat <- res_mean[,std6]
dig <- 2
cap =  c('Results from the ES System.',
'Results from the ES System')
lab = 'tab:es_sys'
filname ='../Tables/chp_ts_es.tex'
inclrnam=FALSE
print_xt(dat,dig,cap,lab,al,filname,inclrnam)
